import{S as y,i as k,s as S,$ as _,a0 as v,k as C,w as M,l as P,m as j,x as I,h as g,n as W,b as q,y as D,a1 as w,f as G,t as H,z as N}from"../../../../chunks/index-46686b93.js";import{i as R,j as z,k as E}from"../../../../chunks/index-c2d2abfc.js";import{v as m,C as L,R as b}from"../../../../chunks/projects-67f24b8f.js";const T=10;class V{constructor(t,s,a){this.pos=new m(t,s),this.vel=new m(0,0),this.color=a}step(){this.pos=this.pos.plus(this.vel)}}class F{constructor(){this.bodies=[],this.trails=[],this.gravity_constant=6.7*1,this.light_speed=2,this.paths_length=5,this.number_iterations=10}step(){for(let t=0;t<this.number_iterations;t++){for(let s=0;s<this.bodies.length;s++)this.bodies[s].step();for(let s=0;s<this.bodies.length-1;s++)for(let a=s+1;a<this.bodies.length;a++)this.gravity(this.bodies[s],this.bodies[a])}for(let t=0;t<this.bodies.length;t++){for(;this.trails[t].length>this.paths_length;)this.trails[t].shift();this.trails[t].push(this.bodies[t].pos)}}gravity(t,s){let a=s.pos.x-t.pos.x,e=s.pos.y-t.pos.y,h=Math.pow(a,2)+Math.pow(e,2)+T,c=this.light_speed,r=this.gravity_constant*(.01/h);r>c&&(r=c);let l=new m(a,e).divide(Math.sqrt(h)).times(r);t.vel=t.vel.plus(l),s.vel=s.vel.minus(l)}add(t){this.bodies.push(t),this.trails.push([t.pos])}}function J(o){let t,s,a,e,h;function c(i){o[4](i)}function u(i){o[5](i)}let r={setup:o[2],draw:o[3]};return o[0]!==void 0&&(r.values=o[0]),o[1]!==void 0&&(r.actions=o[1]),s=new L({props:r}),_.push(()=>v(s,"values",c,o[0])),_.push(()=>v(s,"actions",u,o[1])),{c(){t=C("div"),M(s.$$.fragment),this.h()},l(i){t=P(i,"DIV",{class:!0});var l=j(t);I(s.$$.fragment,l),l.forEach(g),this.h()},h(){W(t,"class","relative")},m(i,l){q(i,t,l),D(s,t,null),h=!0},p(i,[l]){const n={};!a&&l&1&&(a=!0,n.values=i[0],w(()=>a=!1)),!e&&l&2&&(e=!0,n.actions=i[1],w(()=>e=!1)),s.$set(n)},i(i){h||(G(s.$$.fragment,i),h=!0)},o(i){H(s.$$.fragment,i),h=!1},d(i){i&&g(t),N(s)}}}const Y={short:"Nbody simple simulation with euler integration",topic:"simulation euler"};let K=200;function O(o,t,s){let a=!1;const e=new F;e.reset=function(){e.bodies=[],e.trails=[];for(let n=0;n<K;n++)e.add(new V(b(window.innerWidth),b(window.innerHeight),[0,0,0]))},e.draw=function(n){n.strokeWeight(3);for(let f=0;f<e.trails.length;f++){const $=e.bodies[f],p=e.trails[f];n.stroke($.color);for(let d=0;d<p.length-1;d++)n.line(p[d].x,p[d].y,p[d+1].x,p[d+1].y)}};const h=n=>{n.createCanvas(window.innerWidth,window.innerHeight),e.reset()},c=n=>{n.background(220),a||e.step(),e.draw(n)};let u=e,r={reset:{label:R,function:()=>{e.reset()}},pause:{label:a?z:E,function:()=>{a=!a}}};function i(n){u=n,s(0,u)}function l(n){r=n,s(1,r)}return[u,r,h,c,i,l]}class Z extends y{constructor(t){super(),k(this,t,O,J,S,{})}}export{Z as default,Y as metadata};
